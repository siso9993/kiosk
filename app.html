<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="UTF-8" />
    <title>EZ-WASH Aplikácia</title>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <!-- Lottie (pre .json animácie) -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <!-- Hlavný CSS súbor -->
    <link rel="stylesheet" href="css/kiosk.css" />

    <!-- Dodatočné štýly -->
    <style>
      /* Reset & base */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Roboto", sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background: #f9f9f9;
      }

      /* Container pre aplikáciu */
      .app-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        position: relative;
      }

      /* Horná lišta s prepínačom jazyka a prípadným logom */
      .top-bar {
        background: #007bff;
        color: #fff;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .language-switcher {
        display: inline-flex;
        gap: 15px;
        font-size: 1.2rem;
        cursor: pointer;
      }
      .language-switcher .lang-option:hover {
        opacity: 0.8;
      }
      .app-title {
        font-size: 1.3rem;
        font-weight: bold;
      }

      /* Hlavný obsah aplikácie (jednotlivé obrazovky) */
      .main-content {
        flex: 1;
        position: relative;
        overflow-y: auto;
        padding: 20px;
      }

      /* Skryté obrazovky */
      .screen {
        display: none;
      }
      .screen.active {
        display: block;
      }
      .screen h1 {
        margin-bottom: 1rem;
      }

      /* Centrálne zarovnanie pre domovskú obrazovku */
      #home-screen {
        text-align: center;
      }
      .lottie-container {
        margin: 0 auto 1rem auto;
        max-width: 300px;
      }

      /* Bežné tlačidlá */
      button {
        margin: 10px 0;
        padding: 10px 20px;
        font-size: 1rem;
        cursor: pointer;
        border: none;
        border-radius: 4px;
        background: #007bff;
        color: #fff;
      }
      button:hover {
        background: #0056cc;
      }
      input {
        display: block;
        padding: 10px;
        font-size: 1rem;
        margin: 5px 0;
        width: 100%;
        max-width: 300px;
      }

      /* Odkazy v pätičke (pod textom) */
      .footer-links {
        text-align: center;
        margin-top: 20px;
      }
      .footer-links a {
        margin: 0 5px;
        text-decoration: none;
        color: #007bff;
        font-size: 0.9rem;
      }
      .footer-links a:hover {
        text-decoration: underline;
      }

      /* MODÁLNA SPRÁVA */
      .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: #fff;
        padding: 20px;
        text-align: center;
        border-radius: 8px;
        width: 300px;
      }

      /* KLÁVESNICA */
      #keyboardContainer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
      }
      #keyboard {
        display: none;
        background: #e8e8e8;
        padding: 10px;
      }

      /* Spodná navigačná lišta (zobrazuje sa po prihlásení) */
      .bottom-nav {
        display: none; /* Skryté, kým nie je prihlásený používateľ */
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: #fff;
        border-top: 1px solid #ddd;
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
        height: 60px;
        display: flex;
        justify-content: space-around;
        align-items: center;
      }
      .bottom-nav button {
        background: none;
        border: none;
        color: #555;
        font-size: 0.9rem;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .bottom-nav button i {
        font-size: 1.2rem;
      }
      .bottom-nav button.active {
        color: #007bff;
      }

      /* Minimal styling for demonstration */
      .centered {
        text-align: center;
      }
    </style>
  </head>

  <body>
    <!-- APLIKAČNÝ KONTAJNER -->
    <div class="app-container">
      <!-- Horná lišta s názvom a prepínačom jazyka -->
      <div class="top-bar">
        <div class="app-title">EZ-WASH</div>
        <div class="language-switcher">
          <span class="lang-option" onclick="setLanguage('sk')">🇸🇰</span>
          <span class="lang-option" onclick="setLanguage('en')">🇬🇧</span>
        </div>
      </div>

      <!-- HLAVNÝ OBSAH (obrazovky) -->
      <div class="main-content" id="screensContainer">
        <!-- Domovská obrazovka -->
        <div id="home-screen" class="screen active">
          <h1>Vitajte v EZ-WASH</h1>
          <div class="lottie-container">
            <lottie-player
              id="homeLottiePlayer"
              src="assets/lottie/home-animation.json"
              background="transparent"
              speed="0.6"
              style="width: 100%; height: 200px;"
              autoplay
            ></lottie-player>
          </div>
          <p>Pre kvalitnú starostlivosť o vaše prádlo využite naše služby.</p>
          <div class="footer-links">
            <a href="#" onclick="navigateTo('termsScreen')">Obchodné podmienky</a> |
            <a href="#" onclick="navigateTo('gdprScreen')">GDPR</a> |
            <a href="#" onclick="navigateTo('pricingScreen')">Cenník</a>
          </div>

          <!-- Ak používateľ NIE je prihlásený, zobrazíme tlačidlá Prihlásenie/Registrácia -->
          <div class="centered" id="home-unauthenticated">
            <button onclick="navigateTo('registrationScreen')">
              <i class="fa-solid fa-user-plus btn-icon"></i>
              Registrácia
            </button>
            <button onclick="navigateTo('loginScreen')">
              <i class="fa-solid fa-sign-in btn-icon"></i>
              Prihlásenie
            </button>
          </div>

          <!-- Ak je používateľ PRIHLÁSENÝ, zobrazíme rýchly prístup do menu -->
          <div class="centered" id="home-authenticated" style="display: none;">
            <button onclick="navigateTo('newOrderScreen')">
              <i class="fa-solid fa-plus-circle btn-icon"></i>
              Nová objednávka
            </button>
            <button onclick="navigateTo('mainMenuScreen')">
              <i class="fa-solid fa-bars btn-icon"></i>
              Hlavné menu
            </button>
          </div>
        </div>

        <!-- Registrácia -->
        <div id="registrationScreen" class="screen">
          <h1>Registrácia</h1>
          <p>Zadajte vaše telefónne číslo:</p>
          <input
            type="tel"
            id="registerPhoneInput"
            placeholder="0900 000 000"
            onclick="openKeyboardForInput('registerPhoneInput')"
          />
          <button onclick="sendSMSCodeForRegistration()">
            <i class="fa-solid fa-sms btn-icon"></i>
            Odoslať SMS kód
          </button>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- Prihlásenie -->
        <div id="loginScreen" class="screen">
          <h1>Prihlásenie</h1>
          <p>Zadajte svoje prihlasovacie údaje:</p>
          <input
            type="text"
            id="loginUsername"
            placeholder="Používateľské meno"
            onclick="openKeyboardForInput('loginUsername')"
          />
          <input
            type="password"
            id="loginPassword"
            placeholder="Heslo"
            onclick="openKeyboardForInput('loginPassword')"
          />
          <button onclick="loginUser()">
            <i class="fa-solid fa-sign-in btn-icon"></i>
            Prihlásiť sa
          </button>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- Overenie SMS kódu (pre registráciu) -->
        <div id="smsVerificationScreen" class="screen">
          <h1>Overenie SMS</h1>
          <p>Zadajte overovací kód, ktorý ste obdržali:</p>
          <input
            type="text"
            id="smsCodeInput"
            placeholder="0000"
            onclick="openKeyboardForInput('smsCodeInput')"
          />
          <button onclick="verifySMSCode()">
            <i class="fa-solid fa-check-circle btn-icon"></i>
            Overiť kód
          </button>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- Hlavné menu (po prihlásení) -->
        <div id="mainMenuScreen" class="screen">
          <h1>Hlavné menu</h1>
          <button onclick="navigateTo('newOrderScreen')">
            <i class="fa-solid fa-plus-circle btn-icon"></i>
            Nová objednávka
          </button>
          <button onclick="navigateTo('orderHistoryScreen')">
            <i class="fa-solid fa-history btn-icon"></i>
            História objednávok
          </button>
          <button onclick="navigateTo('ongoingOrdersScreen')">
            <i class="fa-solid fa-spinner btn-icon"></i>
            Prebiehajúce objednávky
          </button>
          <button onclick="navigateTo('mapScreen')">
            <i class="fa-solid fa-map btn-icon"></i>
            Mapa
          </button>
          <button onclick="navigateHome()">
            <i class="fa-solid fa-house btn-icon"></i>
            Domov
          </button>
        </div>

        <!-- Nová objednávka -->
        <div id="newOrderScreen" class="screen">
          <h1>Nová objednávka</h1>
          <div class="lottie-container">
            <lottie-player
              src="assets/lottie/order-animation.json"
              background="transparent"
              speed="1"
              style="width: 100%; height: 200px;"
              autoplay
            ></lottie-player>
          </div>
          <p>Vyberte si službu:</p>
          <button onclick="selectService('Pranie + Sušenie + Zloženie')">
            Pranie + Sušenie + Zloženie
          </button>
          <button onclick="selectService('Pranie + Sušenie + Žehlenie + Zloženie')">
            Pranie + Sušenie + Žehlenie + Zloženie
          </button>
          <button onclick="generateOrderCode()">
            <i class="fa-solid fa-check btn-icon"></i>
            Dokončiť objednávku
          </button>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- História objednávok -->
        <div id="orderHistoryScreen" class="screen">
          <h1>História objednávok</h1>
          <p>Zoznam vašich objednávok:</p>
          <div id="orderHistoryList">
            <!-- Dynamicky generovaný zoznam -->
          </div>
          <button onclick="navigateHome()">
            <i class="fa-solid fa-house btn-icon"></i>
            Domov
          </button>
        </div>

        <!-- Prebiehajúce objednávky -->
        <div id="ongoingOrdersScreen" class="screen">
          <h1>Prebiehajúce objednávky</h1>
          <p>Momentálne spracovávané objednávky:</p>
          <div id="ongoingOrdersList">
            <!-- Dynamicky generovaný zoznam -->
          </div>
          <button onclick="navigateHome()">
            <i class="fa-solid fa-house btn-icon"></i>
            Domov
          </button>
        </div>

        <!-- Mapa -->
        <div id="mapScreen" class="screen">
          <h1>Mapa</h1>
          <p>Najbližšie lockerboxy:</p>
          <div style="text-align: center;">
            <lottie-player
              src="assets/lottie/map-animation.json"
              background="transparent"
              speed="1"
              style="width: 300px; height: 300px;"
              autoplay
            ></lottie-player>
          </div>
          <button onclick="navigateHome()">
            <i class="fa-solid fa-house btn-icon"></i>
            Domov
          </button>
        </div>

        <!-- Obchodné podmienky -->
        <div id="termsScreen" class="screen">
          <h1>Obchodné podmienky</h1>
          <p>Tu budú Obchodné podmienky...</p>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- GDPR -->
        <div id="gdprScreen" class="screen">
          <h1>GDPR</h1>
          <p>Tu budú GDPR...</p>
          <button onclick="navigateHome()">Späť</button>
        </div>

        <!-- Cenník -->
        <div id="pricingScreen" class="screen">
          <h1>Cenník</h1>
          <p>Tu bude Cenník...</p>
          <button onclick="navigateHome()">Späť</button>
        </div>
      </div>
    </div>

    <!-- SPODNÁ NAVIGÁCIA (Zobrazuje sa AŽ PO prihlásení) -->
    <div class="bottom-nav" id="bottomNav">
      <button id="navHomeBtn" onclick="navigateTo('home-screen')">
        <i class="fa-solid fa-house"></i>
        <span>Domov</span>
      </button>
      <button id="navNewOrderBtn" onclick="navigateTo('newOrderScreen')">
        <i class="fa-solid fa-plus-circle"></i>
        <span>Nová</span>
      </button>
      <button id="navHistoryBtn" onclick="navigateTo('orderHistoryScreen')">
        <i class="fa-solid fa-history"></i>
        <span>História</span>
      </button>
      <button id="navOngoingBtn" onclick="navigateTo('ongoingOrdersScreen')">
        <i class="fa-solid fa-spinner"></i>
        <span>Prebieha</span>
      </button>
      <button id="navMapBtn" onclick="navigateTo('mapScreen')">
        <i class="fa-solid fa-map"></i>
        <span>Mapa</span>
      </button>
    </div>

    <!-- MODÁLNA SPRÁVA -->
    <div id="messageModal" class="modal">
      <div class="modal-content">
        <p id="modalMessage"></p>
        <button onclick="closeModalMessage()">OK</button>
      </div>
    </div>

    <!-- KLÁVESNICA -->
    <div id="keyboardContainer">
      <div id="keyboard" style="display:none;"></div>
    </div>

    <!-- JS SCRIPTS -->
    <!-- Preklady (príklad) -->
    <script>
      window.translations = {
        sk: {
          invalidPhone: "Prosím, zadajte platné telefónne číslo!",
          smsSent: "SMS kód odoslaný na ",
          phoneVerified: "Telefón overený!",
          invalidCode: "Neplatný kód!",
          serviceSelected: "Zvolená služba: ",
          measuredWeight: "Zmeraná váha: ",
          scanning: "Skenuje sa...",
          cardPayment: "Prebieha platba kartou...",
          contactlessPayment: "Prebieha bezkontaktná platba...",
          invalidEmail: "Zadajte platný e-mail!",
          invoiceSent: "Faktúra odoslaná na ",
          adminLoginSuccess: "Prihlásenie do admin rozhrania úspešné.",
          adminLoginFail: "Nesprávne údaje!",
          lockerSelected: "Vybraná skrinka č. ",
          lockerSelectedSuffix: " pre objednávku ",
          lockersCompleted: "Skrinky boli rozdelené!",
          enterQRCode: "Zadajte QR kód!",
          readyForNextOrder: "Skrinka pripravená pre ďalšiu objednávku!",
          restockingCompleted: "Dopĺňanie dokončené!"
        },
        en: {
          invalidPhone: "Please enter a valid phone number!",
          smsSent: "SMS code sent to ",
          phoneVerified: "Phone verified!",
          invalidCode: "Invalid code!",
          serviceSelected: "Selected service: ",
          measuredWeight: "Measured weight: ",
          scanning: "Scanning...",
          cardPayment: "Processing card payment...",
          contactlessPayment: "Processing contactless payment...",
          invalidEmail: "Please enter a valid email!",
          invoiceSent: "Invoice sent to ",
          adminLoginSuccess: "Admin login successful.",
          adminLoginFail: "Incorrect admin credentials!",
          lockerSelected: "Locker chosen: ",
          lockerSelectedSuffix: " for order ",
          lockersCompleted: "All lockers have been assigned!",
          enterQRCode: "Please enter a QR code!",
          readyForNextOrder: "Locker ready for the next order!",
          restockingCompleted: "Restocking completed!"
        }
      };
    </script>

    <!-- Hlavný JS (kiosk-app.js) -->
    <script src="js/kiosk-app.js"></script>
  </body>
</html>
